<UserControl x:Class="WpfExtensions.Controls.LoadingPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:ctr="clr-namespace:WpfExtensions.Controls"
             xmlns:classicTheme="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Classic">

  <UserControl.Resources>
    <BooleanToVisibilityConverter x:Key="bool2visibility" />

		<LinearGradientBrush x:Key="panelBackground" EndPoint="0.5,1" StartPoint="0.5,0">
			<GradientStop Color="Black" Offset="1" />
			<GradientStop Color="#FF1B1B1B" />
		</LinearGradientBrush>
	</UserControl.Resources>

  <DockPanel Visibility="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=IsLoading, Mode=OneWay, Converter={StaticResource bool2visibility}}">
		<StackPanel Orientation="Vertical">
			<ctr:CircularProgressBar x:Name="progressBar"
                             DockPanel.Dock="Left"
                             HorizontalAlignment="Center"
                             VerticalAlignment="Center"
                             Height="45"
                             Margin="10" />
			<Label HorizontalContentAlignment="Center" Content="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=Message}"></Label>
		</StackPanel>
	</DockPanel>
</UserControl>
