<form class="login-form p-3" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
  <fieldset>
    <legend class="font-weight-semibold"><i class="icon-user-check mr-2"></i> User details</legend>
    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label class="m-0 d-block text-blue">Username</label>
          <input [ngClass]="{'border-danger' : submitted &&  (f.userName.invalid || duplicateUser === f.userName.value)}"
            type="text" class="form-control" placeholder="Username" [readonly]="acceptedUserData && acceptedUserData.id > 0"
            formControlName="userName" name="userName" (blur)="!f.userName.invalid && userDuplicateCheck()">

          <div *ngIf="submitted || f.userName.touched" class="form-text text-danger">
            <span *ngIf="f.userName.invalid; else userNameValidationElse">
              <span *ngIf="f.email.errors.required"> Username name is required</span>
              <span *ngIf="f.userName.errors.minlength;">
                Username must be at least 5 characters</span>
            </span>
            <ng-template #userNameValidationElse>
              <span *ngIf="duplicateUser === f.userName.value">This username is already taken</span>
            </ng-template>
          </div>

        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <label class="m-0 d-block text-blue">Email</label>
          <input [ngClass]="{'border-danger' : submitted &&  (f.email.invalid || duplicateEmail === f.email.value)}"
            type="email" class="form-control" placeholder="Your email" formControlName="email" autocomplete="auto"
            (blur)="!f.email.invalid && emailDuplicateCheck()">

          <div *ngIf="submitted || f.email.touched" class="form-text text-danger">
            <span *ngIf="f.email.invalid; else emailValidationElse">
              <span *ngIf="f.email.errors.required"> Email name is required</span>
              <span *ngIf="f.email.errors.email;">
                Email must be a valid email address</span>
            </span>
            <ng-template #emailValidationElse>
              <span *ngIf="duplicateEmail === f.email.value">This email is already taken</span>
            </ng-template>
          </div>
        </div>
      </div>
    </div>


    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label class="m-0 d-block text-blue">First name</label>
          <input [ngClass]="{'border-danger' : submitted &&  f.firstName.invalid}" type="text" class="form-control"
            placeholder="First name" formControlName="firstName">


          <div *ngIf="f.firstName.invalid && (submitted || f.firstName.touched)" class="form-text text-danger">
            <span *ngIf="f.firstName.errors.required"> First name is required</span>
            <span *ngIf="f.firstName.errors.minlength"> First name must be at least 2 characters</span>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <label class="m-0 d-block text-blue">Last name</label>
          <input [ngClass]="{'border-danger' : submitted &&  f.lastName.invalid}" type="text" class="form-control"
            placeholder="Last name" formControlName="lastName">

          <div *ngIf="f.lastName.invalid && (submitted || f.lastName.touched)" class="form-text text-danger">
            <span *ngIf="f.lastName.errors.required"> Last name is required</span>
            <span *ngIf="f.lastName.errors.minlength"> Last name must be at least 2 characters</span>
          </div>

        </div>
      </div>
    </div>

    <div [hidden]="acceptedUserData && acceptedUserData.id > 0" class="row">
      <div class="col-md-6">
        <div class="form-group form-group-feedback form-group-feedback-right">
          <label class="m-0 d-block text-blue">Password</label>
          <input [type]="passwordShow ? 'text' : 'password'" [ngClass]="{'border-danger' : (submitted || f.password.touched) &&  f.password.invalid}"
            class="form-control" placeholder="New password" formControlName="password" (keyup)="passwordMatchValidator()">

          <div *ngIf="!(f.password.invalid && f.password.errors.required)" class="form-control-feedback" (click)="passwordShow =  !passwordShow">
            <a href="javascript:void(0)"><i class="icon-eye" [class.text-muted]="!passwordShow"></i></a>
          </div>

          <div *ngIf="f.password.invalid && (submitted || f.password.touched)" class="form-text text-danger">
            <span *ngIf="f.password.errors.required"> Password name is required</span>
            <span *ngIf="f.password.errors.minlength || f.password.errors.maxlength; else passwordValidationElse">
              Password must be minimum 6 maximum 20 characters </span>
            <ng-template #passwordValidationElse>
              <span *ngIf="f.password.errors.pattern">Password must be at least one uppercase letter, one lowercase
                letter, one special character and one number </span>
            </ng-template>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group form-group-feedback form-group-feedback-right">
          <label class="m-0 d-block text-blue">Confirm password</label>
          <input [type]="confirmPasswordShow ? 'text' : 'password'" [ngClass]="{'border-danger' : (submitted || f.confirmPassword.touched) &&  f.confirmPassword.invalid}"
            class="form-control" placeholder="Confirm password" formControlName="confirmPassword" (keyup)="passwordMatchValidator()">

          <div *ngIf="!(f.confirmPassword.invalid && f.confirmPassword.errors.required)" class="form-control-feedback"
            (click)="confirmPasswordShow =  !confirmPasswordShow">
            <a href="javascript:void(0)"><i class="icon-eye" [class.text-muted]="!confirmPasswordShow"></i></a>
          </div>
          <div *ngIf="submitted || f.confirmPassword.touched" class="form-text text-danger">
            <span *ngIf="f.confirmPassword.invalid && f.confirmPassword.errors.required"> Confirm password name is
              required</span>
            <span *ngIf="passwordMatchError"> Confirm password does not match</span>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div *ngIf="f.id && f.id.value > 0" class="col-md-6">
        <div class="form-group form-group-feedback form-group-feedback-left">
          <label class="mb-2 d-block text-blue">Status</label>
          <!-- <div class="form-check form-check-inline">
                <label class="form-check-label">
                  <input [attr.disabled]="true" type="radio" class="form-check-input" name="status" value="Pending"
                    formControlName="status">
                  Pending
                </label>
              </div> -->
          <div class="form-check form-check-inline">
            <label class="form-check-label">
              <input type="radio" class="form-check-input" name="status" value="Accepted" formControlName="status">
              Accepted
            </label>
          </div>
          <div class="form-check form-check-inline">
            <label class="form-check-label">
              <input type="radio" class="form-check-input" name="status" value="Declined" formControlName="status">
              Declined
            </label>
          </div>
          <div *ngIf="submitted && f.status.invalid" class="form-text text-danger">
            <span *ngIf="f.status.errors.required"> Choose status. </span>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <label class="m-0 d-block text-blue">Mobile number</label>
          <div class="input-group">
            <span class="input-group-prepend">
              <span class="input-group-text">+994</span>
            </span>
            <input id="user-phone-number-pattern" type="text" [ngClass]="{'border-danger' : submitted &&  f.phoneNumber.invalid}"
              class="form-control" placeholder="51 000 00 00" formControlName="phoneNumber" (keyup)="formatPhoneNumber($event)">
          </div>

          <div *ngIf="f.phoneNumber.invalid && (submitted || f.phoneNumber.touched)" class="form-text text-danger">
            <span *ngIf="f.phoneNumber.errors.required"> Mobile number name is required</span>
            <span *ngIf="f.phoneNumber.errors.minlength"> Mobile number must be at least 8 characters</span>
            <span *ngIf="f.phoneNumber.errors.maxlength"> Mobile number should be max 12 characters</span>
          </div>
        </div>
      </div>
    </div>
  </fieldset>

  <fieldset>
    <legend class="font-weight-semibold"><i class="icon-office mr-2"></i> Company details</legend>
    <div formGroupName="company">
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label class="m-0 d-block text-blue">Company name</label>
            <input [ngClass]="{'border-danger' : submitted &&  f.company.controls.name.invalid}" type="text" class="form-control"
              placeholder="Company Name" formControlName="name" name="name">


            <div *ngIf="f.company.controls.name.invalid && (submitted || f.company.controls.name.touched)" class="form-text text-danger">
              <span *ngIf="f.company.controls.name.errors.required"> Name is required</span>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-group">
            <label class="m-0 d-block text-blue">Airport</label>
            <!-- <input [ngClass]="{'border-danger' : submitted &&  f.company.controls.airportId.invalid}" type="text" class="form-control"
                  placeholder="Astana" formControlName="airport" name="airport"> -->
            <select class="form-control" formControlName="airportId" name="airportId" (change)="airportOnChange($event.target.value)"
              [ngClass]="{'border-danger' : submitted &&  f.company.controls.airportId.invalid}">
              <option selected value="">Airport</option>
              <option *ngFor="let airport of airportList" [value]="airport.identifier">{{airport.name}}</option>
            </select>
            <div *ngIf="f.company.controls.airportId.invalid && (submitted || f.company.controls.airportId.touched)" class="form-text text-danger">
              <span *ngIf="f.company.controls.airportId.errors.required">Select airport</span>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label class="m-0 d-block text-blue">Address</label>
            <input [ngClass]="{'border-danger' : submitted &&  f.company.controls.address.invalid}" type="text" class="form-control"
              placeholder="Ghumar Qarash St" formControlName="address" name="address">
            <div *ngIf="f.company.controls.address.invalid && (submitted || f.company.controls.address.touched)" class="form-text text-danger">
              <span *ngIf="f.company.controls.address.errors.required"> Adress is required</span>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-group">
            <label class="m-0 d-block text-blue">Zip code</label>
            <input [ngClass]="{'border-danger' : submitted &&  f.company.controls.zip.invalid}" type="text" class="form-control"
              placeholder="010000" formControlName="zip" name="zip">
            <div *ngIf="f.company.controls.zip.invalid && (submitted || f.company.controls.zip.touched)" class="form-text text-danger">
              <span *ngIf="f.company.controls.zip.errors.required"> Zip code is required</span>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label class="m-0 d-block text-blue">Telephone</label>
            <input [ngClass]="{'border-danger' : submitted &&  f.company.controls.telephone.invalid}" type="text" class="form-control"
              placeholder="+7 123 45 67" formControlName="telephone" name="telephone">
            <div *ngIf="f.company.controls.telephone.invalid && (submitted || f.company.controls.telephone.touched)" class="form-text text-danger">
              <span *ngIf="f.company.controls.telephone.errors.required"> Telephone is required</span>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-group">
            <label class="m-0 d-block text-blue">Fax</label>
            <input [ngClass]="{'border-danger' : submitted &&  f.company.controls.fax.invalid}" type="text" class="form-control"
              placeholder="+7 123 45 67" formControlName="fax" name="fax">
            <div *ngIf="f.company.controls.fax.invalid && (submitted || f.company.controls.fax.touched)" class="form-text text-danger">
              <span *ngIf="f.company.controls.fax.errors.required"> Fax is required</span>
            </div>
          </div>
        </div>
      </div>
    </div>

  </fieldset>
  <!-- <button [routerLink]="['/users']" type="button" class="btn bg-transparent text-danger-400 border-danger-400 ml-1 legitRipple float-right">Cancel</button> -->
  <!-- <button [disabled]="loading" type="submit" class="btn btn-outline bg-success-400 text-success-400 border-success-400 legitRipple float-right">Save</button> -->
  <button [disabled]="loading" type="submit" class="btn bg-blue btn-block">Save</button>
  <!-- <a [routerLink]="['/login']" class="btn float-right mt-2">Cancel</a> -->
</form>